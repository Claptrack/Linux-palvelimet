# h5) Nimekäs


## a) Kotisivu
*<h3>[Tehtävänanto](https://terokarvinen.com/linux-palvelimet/#h5-nimekas): Tee vähintään kolmen erillisen weppisivun kotisivu ja kopioi se näkymään palvelimellesi. Jos sinulla on oikea palvelin Internetissä, kannattaa käyttää sitä. Käytä name based virtual hosting tekniikkaa. Sivujen muokkaamisen pitää onnistua ilman pääkäyttäjän oikeuksia, niiden kopioiminen pääkäyttäjänä testisivun paikalle ei käy. Kotisivujen ei tarvitse olla hienoja, mutta niiden tulee olla validia HTML:ää ja linkittää toisiinsa.</h3>*

Edellisessä tehtävässä olin julkaissut kotisivuni /var/www-hakemistosta, mutta yleisintä lienee kuitenkin julkaista kotihakemistossa oleva kansio, joten lähdin yrittämään sitä.

Päädyin asentamaan apachen uudelleen sillä en ollut varma, olinko tehnyt jotain raportoimattomia muutoksia edellisessä tehtävässä, jotka olisivat saattaneet vaikuttaa tämän tehtävän onnistumiseen. Tein sen komennoilla 'sudo apt-get remove --purge apache2' sekä 'sudo apt-get autoremove'. Ensimmäinen poisti kaiken kyseiseen pakettiin liittyvän ja toinen poisti "orvoiksi" jääneet paketit, eli apache2-paketin vanhat riippuvuudet. Tämän jälkeen asensin apachen uudestaan komennoilla 'sudo apt-get update' ja 'sudo apt-get install apache2'.

Asennuksen jälkeen luin läpi apachen ohjeen (default-sivu), joka löytyi kotisivultani asennuksen jälkeen. Tästä ohjeesta poimin tiedon oman kotihakemistossa olevan kansion whitelistaamisesta, sillä lähtökohtaisesti ainoastaan /var/www- ja /usr/share-hakemistoihin pääsee webistä. 

<br/><br/>
<img width="805" alt="image" src="https://github.com/user-attachments/assets/4c97b654-c3a3-4192-ba6b-c782a1bacba9">
<br/><br/>

Päätin muuttaa '/usr/share' -hakemiston --> '/home/mathias/publicsites' -hakemistoksi, johon olin ajatellut laittaa weppisivuni. Tein muutoksen 'apache2.conf' -tiedostoon komennolla 'sudoedit /etc/apache2/apache2.conf'.

Tämän jälkeen loin uuden konffitiedoston 'suontaa.com.conf' hakemistoon '/etc/apache2/sites-available/'.

<br/><br/>
<img width="584" alt="image" src="https://github.com/user-attachments/assets/79664c8a-8613-4170-841a-23d389bcc8c0">
<br/><br/>

Aktivoin uuden konfiguraation komennolla 'sudo a2ensite suontaa.conf' ja käynnistin apachen uudelleen komennolla 'sudo systemctl restart apache2'.

Tämän jälkeen suunnistin selaimella osoitteeseen 'http://suontaa.com', jossa vastauksena tuli sivustoni, johon olin lisännyt tervehdyksen.

<br/><br/>
<img width="531" alt="image" src="https://github.com/user-attachments/assets/a4282385-d817-4665-a5e4-94646928e847">
<br/><br/>

Tein myös toiselle verkkotunnukselleni 'suontaa.me' oman konffitiedoston, jossa ohjataan samalle verkkosivulle.

<br/><br/>
<img width="770" alt="image" src="https://github.com/user-attachments/assets/eefd1800-4dba-4837-bfae-ad472e4ecfe2">
<br/><br/>

### Kaksi weppisivua lisää

Lähdin kokeilemaan tätä luomalla kaksi uutta konffitiedostoa tuleville alidomaineille, jotka tulivat olemaan memes.suontaa.com ja weather.suontaa.com. Kopioin olemassaolevan konffitiedoston kahdeksi eri tiedostoksi ja muokkasin sisällön oikeaksi.

<img width="438" alt="image" src="https://github.com/user-attachments/assets/d48c1ec1-d298-4998-bc85-ac9bceb34364">
<br></br>
<img width="448" alt="image" src="https://github.com/user-attachments/assets/b6ccb086-56b7-4c04-b49e-814db338ffd6">

Tämän jälkeen menin luomaan sivut.

'cd /home/mathias/publicsites'

'mkdir memes.suontaa.com' ja 'mkdir weather.suontaa.com'

Loin molempiin kansioihin omat index.html-tiedostot, joihin lisäsin sisältöä.

Tämän jälkeen aktivoin sivut 'sudo a2ensite weather.suontaa.com' sekä 'sudo a2ensite memes.suontaa.com', jonka jälkeen tein vielä reloadin apachelle komennolla 'sudo systemctl reload apache2'.

Tämän jälkeen lähdin luomaan uudet alidomainit uusille weppisivuilleni.


## b) Alidomain. 

### [Tehtävänanto](https://terokarvinen.com/linux-palvelimet/#h5-nimekas): Tee kaksi uutta alidomainia, jotka osoittava omaan koneeseesi. Esimerkiksi palvelu on example.com -> linuxkurssi.example.com. Tee toinen alidomain A-tietueella ja toinen CNAME-tietueella. Alidomainit ovat tyypillisesti ilmaisia, kun sinulla on päädomain (example.com).

Lähdin ensimmäisenä lukemaan namecheapin omia [ohjeita](https://www.namecheap.com/support/knowledgebase/article.aspx/9776/2237/how-to-create-a-subdomain-for-my-domain/) alidomainien lisäämiseksi. Päädyin ensin tekemään A-tietueen memes.suontaa.com-osoitteelle.

<img width="1117" alt="image" src="https://github.com/user-attachments/assets/185d970c-8a91-4407-b6c3-ac4a8996dac6">

Selaimella kokeilemalla tuli vastaukseksi "Can't find the server", joten kokeilin komentoa 'host memes.suontaa.com dns1.registrar-servers.com' joka palautti oikeat nimipalvelimet sekä palvelimen osoitteen. Seuraavaksi lähdin tekemään CNAME-tietuetta weather.suontaa.com-sivustolle.

Lisäsin CNAME-tietueen host-tiedon ohjeen mukaan:

<img width="1109" alt="image" src="https://github.com/user-attachments/assets/49e1cdcb-ca46-4e01-b105-e9bdccbd9e36">

Vajaan vartin päästä pääsin näkemään sivut myös omalta selaimelta. Sivut löytyy osoitteesta suontaa.com (alisivut memes.suontaa.com ja weather.suontaa.com).

## c) Pubkey. 

### [Tehtävänanto](https://terokarvinen.com/linux-palvelimet/#h5-nimekas): Automatisoi kirjautuminen julkisella SSH-avaimella.

## d) Tutki jonkin nimen DNS-tietoja 'host' ja 'dig' -komennoilla.

### [Tehtävänanto](https://terokarvinen.com/linux-palvelimet/#h5-nimekas): Käytä kumpaakin komentoa kaikkiin nimiin ja vertaa tuloksia. Katso man-sivulta, miten komennot toimivat - esimerkiksi miten 'dig' näyttää kaikki kentät. Analysoi tulokset. Etsi tarvittaessa uusia lähteitä haastaviin kohtiin. Sähköpostin todentamiseen liittyvät SPF ja DMARC -tietojen yksityiskohdat on jätetty vapaaehtoiseksi lisätehtäväksi. Tutkittavat nimet:
- Oma domain-nimesi. Vertaa tuloksia nimen vuokraajan (namecheap.com, name.com...) weppiliittymässä näkyviin asetuksiin.
- Jonkin pikkuyrityksen, kerhon tai yksittäisen henkilön weppisivut. (Ei kuitenkaan kurssikaverin tällä viikolla vuokrattua nimeä).
- Jonkin suuren ja kaikkien tunteman palvelun tiedot.

m) Vapaaehtoinen bonus: Aakkossalaattia sähköpostiin. Etsi palvelu, jonka DNS-tiedoissa on SPF ja DMARC. Selitä näiden kenttien osat ja vaikutukset yksityiskohtaisesti. Voit halutessasi käyttää tulkinnan apuna jotain ohjelmaa tai palvelua, kunhan selität ja tulkitset lopputuloksen myös itse.

## a) Kotisivu


